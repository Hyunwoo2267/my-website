<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìº í¼ìŠ¤ë‹¹ê·¼ - ë°ëª¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow: hidden;
        }

        .phone-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .phone {
            width: 375px;
            height: 812px;
            background: #000;
            border-radius: 40px;
            padding: 8px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            position: relative;
        }

        .screen {
            width: 100%;
            height: 100%;
            background: #fff;
            border-radius: 32px;
            overflow: hidden;
            position: relative;
        }

        .status-bar {
            height: 44px;
            background: #fff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .screen-content {
            height: calc(100% - 44px);
            overflow-y: auto;
            overflow-x: hidden;
            position: relative;
        }

        /* í™”ë©´ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜ */
        .screen-view {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }

        .screen-view.hidden {
            transform: translateX(100%);
            opacity: 0;
            pointer-events: none;
        }

        .screen-view.slide-left {
            transform: translateX(-100%);
            opacity: 0;
            pointer-events: none;
        }

        /* ë¡œê·¸ì¸/íšŒì›ê°€ì… í™”ë©´ */
        .auth-screen {
            padding: 40px 30px;
            text-align: center;
            background: linear-gradient(135deg, #ff6b6b 0%, #ffa726 100%);
            color: white;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .logo {
            font-size: 36px;
            font-weight: 800;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .subtitle {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 30px;
        }

        .auth-form {
            margin-bottom: 120px;
        }

        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .input-label {
            font-size: 14px;
            margin-bottom: 4px;
            display: block;
            opacity: 0.9;
        }

        .input-field {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            background: rgba(255,255,255,0.2);
            color: white;
            backdrop-filter: blur(10px);
        }

        .input-field::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .btn-primary {
            width: 100%;
            padding: 15px;
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .btn-primary:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .register-link {
            font-size: 14px;
            opacity: 0.8;
            cursor: pointer;
            text-decoration: underline;
        }

        /* íšŒì›ê°€ì… í™”ë©´ */
        .register-screen {
            padding: 40px 30px;
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            color: white;
            height: 100%;
            overflow-y: hidden;
        }

        .back-btn {
            color: white;
            font-size: 24px;
            cursor: pointer;
            margin-bottom: 20px;
        }

        /* ë©”ì¸ í™”ë©´ */
        .main-screen {
            height: 100%;
            background: #f8f9fa;
        }

        .header {
            background: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 24px;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
        }

        .header p {
            color: #666;
            font-size: 14px;
        }

        .main-actions {
            padding: 30px 20px 100px;
        }

        .action-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        .action-card {
            background: white;
            border-radius: 16px;
            padding: 25px 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }

        .action-card.seller {
            border-color: #4f46e5;
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            color: white;
        }

        .action-card.buyer {
            border-color: #059669;
            background: linear-gradient(135deg, #059669 0%, #0d9488 100%);
            color: white;
        }

        .action-icon {
            font-size: 32px;
            margin-bottom: 12px;
        }

        .action-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .action-desc {
            font-size: 12px;
            opacity: 0.8;
        }

        .trade-methods {
            background: white;
            border-radius: 16px;
            padding: 25px 20px 5px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
        }

        .method-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .method-item:last-child {
            border-bottom: none;
        }

        .method-item:hover {
            background: #f8f9ff;
            margin: 0 -20px;
            padding-left: 20px;
            padding-right: 20px;
            border-radius: 8px;
        }

        .method-info {
            display: flex;
            align-items: center;
        }

        .method-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .smart-contract {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin-bottom: 15px;
        }

        .direct-trade {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            margin-bottom: 15px;
        }

        .escrow-trade {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            margin-bottom: 15px;
        }

        .method-text h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .method-text p {
            font-size: 12px;
            color: #666;
        }

        .arrow {
            color: #ccc;
            font-size: 18px;
        }

        /* ìƒí’ˆ ëª©ë¡ í™”ë©´ */
        .product-list-screen {
            height: 100%;
            background: #f8f9fa;
        }

        .search-header {
            background: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .search-box {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #e0e0e0;
            border-radius: 20px;
            font-size: 16px;
            background: #f5f5f5;
        }

        .product-grid {
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            padding-bottom: 100px;
        }

        .product-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .product-image {
            height: 120px;
            background: linear-gradient(45deg, #f0f0f0, #e0e0e0);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
        }

        .product-info {
            padding: 12px;
        }

        .product-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
        }

        .product-price {
            font-size: 16px;
            font-weight: 700;
            color: #ff6b35;
            margin-bottom: 5px;
        }

        .product-location {
            font-size: 12px;
            color: #666;
        }

        /* ê±°ë˜ ê³¼ì • í™”ë©´ */
        .trade-screen {
            height: 100%;
            background: #f8f9fa;
        }

        .progress-header {
            background: white;
            padding: 20px;
            text-align: center;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: #e9ecef;
            border-radius: 2px;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4f46e5, #7c3aed);
            border-radius: 2px;
            width: 33%;
            transition: width 0.5s ease;
        }

        .step-content {
            padding: 30px 20px 100px;
        }

        .step-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .step-number {
            width: 30px;
            height: 30px;
            background: #4f46e5;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .verification-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .verification-item:last-child {
            border-bottom: none;
        }

        .check-icon {
            color: #059669;
            font-size: 20px;
        }

        .pending-icon {
            color: #f59e0b;
            font-size: 20px;
        }

        /* ë§Œì¡±ë„ ì¡°ì‚¬ í™”ë©´ */
        .satisfaction-screen {
            height: 100%;
            background: #f8f9fa;
        }

        .celebration {
            font-size: 48px;
            margin: 10px 0;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        .content {
            padding: 30px 20px 100px;
        }

        .survey-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .trade-info {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            color: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .trade-item {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .trade-user {
            font-size: 14px;
            opacity: 0.9;
        }

        /* ë³„ì  í‰ê°€ */
        .rating-section {
            margin-bottom: 25px;
        }

        .rating-label {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .star-rating {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .star {
            font-size: 32px;
            color: #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .star.active {
            color: #ffc107;
            transform: scale(1.1);
        }

        .star:hover {
            transform: scale(1.2);
        }

        .rating-text {
            text-align: center;
            font-size: 14px;
            color: #666;
            margin-top: 10px;
        }

        /* ë§Œì¡±ë„ ì´ëª¨ì§€ */
        .emoji-rating {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }

        .emoji-option {
            text-align: center;
            cursor: pointer;
            padding: 1px;
            border-radius: 12px;
            transition: all 0.3s ease;
            flex: 1;
            margin: 0 5px;
        }

        .emoji-option:hover {
            background: #f0f0f0;
            transform: scale(1.05);
        }

        .emoji-option.selected {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            color: white;
        }

        .emoji {
            font-size: 36px;
            margin-bottom: 8px;
        }

        .emoji-label {
            font-size: 12px;
            font-weight: 500;
        }

        /* íƒœê·¸ ì„ íƒ */
        .tag-section {
            margin: 20px 0;
        }

        .tag-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .tag-item {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 20px;
            padding: 12px 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .tag-item:hover {
            border-color: #4f46e5;
            background: rgba(79, 70, 229, 0.1);
        }

        .tag-item.selected {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            color: white;
            border-color: #4f46e5;
        }

        /* í…ìŠ¤íŠ¸ ì…ë ¥ */
        .textarea-group {
            margin: 20px 0;
        }

        .textarea-label {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
            display: block;
        }

        .feedback-textarea {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 14px;
            resize: vertical;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }

        .feedback-textarea:focus {
            outline: none;
            border-color: #4f46e5;
        }

        .char-count {
            text-align: right;
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        /* ë²„íŠ¼ */
        .btn-primary1 {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            border: none;
            color: white;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .btn-primary1:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(79, 70, 229, 0.3);
        }

        .btn-secondary {
            width: 100%;
            padding: 15px;
            background: transparent;
            border: 2px solid #6b7280;
            color: #6b7280;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .btn-secondary:hover {
            background: #6b7280;
            color: white;
        }

        /* ì™„ë£Œ í™”ë©´ */
        .completion-screen {
            text-align: center;
            padding: 50px 20px;
            background: white;
            height: 100%;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .completion-icon {
            font-size: 72px;
            margin-bottom: 20px;
            animation: fadeInScale 1s ease-out;
        }

        @keyframes fadeInScale {
            0% {
                opacity: 0;
                transform: scale(0.5);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .completion-title {
            font-size: 24px;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }

        .completion-subtitle {
            font-size: 16px;
            color: #666;
            margin-bottom: 30px;
        }

        /* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */
        .bottom-nav {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 35px;
            background: white;
            padding: 4px 20px 4px;
            box-shadow: 0 -2px 20px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-around;
            border-radius: 16px;
            z-index: 1000;
        }

        .nav-item {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 10px;
            border-radius: 8px;
        }

        .nav-item.active {
            color: #4f46e5;
            background: rgba(79, 70, 229, 0.1);
        }

        .nav-icon {
            font-size: 24px;
            margin-bottom: 2px;
        }

        .nav-label {
            font-size: 10px;
            font-weight: 500;
        }
            
        /* ì• ë‹ˆë©”ì´ì…˜ */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* í† ìŠ¤íŠ¸ ë©”ì‹œì§€ */
        .toast {
            position: fixed;
            top: 600px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 12px 20px;
            border-radius: 20px;
            font-size: 14px;
            z-index: 2000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .toast.show {
            opacity: 1;
        }

        /* ë¡œë”© ìŠ¤í”¼ë„ˆ */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="phone-container">
        <div class="phone">
            <div class="screen">
                <div class="status-bar">
                    <span id="currentTime">9:41</span>
                    <span>ğŸ”‹ 100%</span>
                </div>
                
                <div class="screen-content">
                    <!-- ë¡œê·¸ì¸ í™”ë©´ -->
                    <div class="screen-view auth-screen" id="authScreen">
                        <div class="logo">ğŸ¥• ìº í¼ìŠ¤ë‹¹ê·¼</div>
                        <div class="subtitle">ì•ˆì „í•œ êµë‚´ ê±°ë˜ í”Œë«í¼</div>
                        
                        <div class="auth-form">
                            <div class="input-group">
                                <label class="input-label">í•™êµ ì´ë©”ì¼</label>
                                <input type="email" class="input-field" placeholder="student@university.ac.kr" id="emailInput">
                            </div>
                            <div class="input-group">
                                <label class="input-label">ë¹„ë°€ë²ˆí˜¸</label>
                                <input type="password" class="input-field" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" id="passwordInput">
                            </div>
                            <button class="btn-primary" onclick="login()" id="loginBtn">ë¡œê·¸ì¸</button>
                        </div>
                        
                        <p style="font-size: 14px; opacity: 0.8;">
                            ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <span class="register-link" onclick="showRegister()">íšŒì›ê°€ì…</span>
                        </p>
                    </div>

                    <!-- íšŒì›ê°€ì… í™”ë©´ -->
                    <div class="screen-view register-screen hidden" id="registerScreen">
                        <div class="back-btn" onclick="showAuth()">â€¹</div>
                        <div class="logo">ğŸ¥• ìº í¼ìŠ¤ë‹¹ê·¼</div>
                        <div class="subtitle">íšŒì›ê°€ì…</div>
                        
                        <div class="auth-form">
                            <div class="input-group">
                                <label class="input-label">ì´ë¦„</label>
                                <input type="text" class="input-field" placeholder="í™ê¸¸ë™">
                            </div>
                            <div class="input-group">
                                <label class="input-label">í•™êµ ì´ë©”ì¼</label>
                                <input type="email" class="input-field" placeholder="student@university.ac.kr">
                            </div>
                            <div class="input-group">
                                <label class="input-label">í•™ë²ˆ</label>
                                <input type="text" class="input-field" placeholder="202012345">
                            </div>
                            <div class="input-group">
                                <label class="input-label">ë¹„ë°€ë²ˆí˜¸</label>
                                <input type="password" class="input-field" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                            </div>
                            <div class="input-group">
                                <label class="input-label">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                                <input type="password" class="input-field" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                            </div>
                            <button class="btn-primary" onclick="register()">ê°€ì…í•˜ê¸°</button>
                        </div>
                    </div>

                    <!-- ë©”ì¸ í™”ë©´ -->
                    <div class="screen-view main-screen hidden" id="mainScreen">
                        <div class="header">
                            <h1>ë°±ì„ëŒ€í•™êµ ğŸ«</h1>
                            <p>ì˜¤ëŠ˜ë„ ì•ˆì „í•œ ê±°ë˜ ë˜ì„¸ìš”</p>
                        </div>

                        <div class="main-actions">
                            <div class="action-grid">
                                <div class="action-card seller" onclick="showSellerFlow()">
                                    <div class="action-icon">ğŸ“</div>
                                    <div class="action-title">íŒë§¤ì</div>
                                    <div class="action-desc">ë¬¼í’ˆ ë“±ë¡í•˜ê¸°</div>
                                </div>
                                <div class="action-card buyer" onclick="showProductList()">
                                    <div class="action-icon">ğŸ›’</div>
                                    <div class="action-title">êµ¬ë§¤ì</div>
                                    <div class="action-desc">ìƒí’ˆ ë‘˜ëŸ¬ë³´ê¸°</div>
                                </div>
                            </div>

                            <div class="trade-methods">
                                <div class="section-title">ê±°ë˜ ë°©ì‹ ì„ íƒ</div>
                                
                                <div class="method-item" onclick="selectTradeMethod('smart')">
                                    <div class="method-info">
                                        <div class="method-icon smart-contract">ğŸ”’</div>
                                        <div class="method-text">
                                            <h3>ìŠ¤ë§ˆíŠ¸ ê³„ì•½ ì—ìŠ¤í¬ë¡œ</h3>
                                            <p>AI ì¤‘ê°œ ì‹œìŠ¤í…œìœ¼ë¡œ ì•ˆì „í•œ ê±°ë˜</p>
                                        </div>
                                    </div>
                                    <div class="arrow">â€º</div>
                                </div>

                                <div class="method-item" onclick="selectTradeMethod('direct')">
                                    <div class="method-info">
                                        <div class="method-icon direct-trade">ğŸ¤</div>
                                        <div class="method-text">
                                            <h3>ì§ì ‘ ê±°ë˜</h3>
                                            <p>GPS ì¸ì¦ í›„ í˜„ì¥ ê±°ë˜</p>
                                        </div>
                                    </div>
                                    <div class="arrow">â€º</div>
                                </div>

                                <div class="method-item" onclick="selectTradeMethod('escrow')">
                                    <div class="method-info">
                                        <div class="method-icon escrow-trade">ğŸ¦</div>
                                        <div class="method-text">
                                            <h3>ì…ê¸ˆ ì•½ì†</h3>
                                            <p>ì˜ˆì¹˜ê¸ˆ ë³´ì¦ ê±°ë˜</p>
                                        </div>
                                    </div>
                                    <div class="arrow">â€º</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ìƒí’ˆ ëª©ë¡ í™”ë©´ -->
                    <div class="screen-view product-list-screen hidden" id="productListScreen">
                        <div class="search-header">
                            <input type="text" class="search-box" placeholder="ì›í•˜ëŠ” ìƒí’ˆì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”" onkeyup="searchProducts(this.value)">
                        </div>

                        <div class="product-grid" id="productGrid">
                            <!-- ìƒí’ˆë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </div>
                    </div>

                    <!-- ê±°ë˜ ê³¼ì • í™”ë©´ -->
                    <div class="screen-view trade-screen hidden" id="tradeScreen">
                        <div class="progress-header">
                            <h2 id="tradeTitle">ê±°ë˜ ì§„í–‰ ìƒí™©</h2>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <p id="progressText">1/3 ë‹¨ê³„ ì™„ë£Œ</p>
                        </div>

                        <div class="step-content" id="stepContent">
                            <!-- ë‹¨ê³„ë³„ ë‚´ìš©ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </div>
                    </div>

                    <!-- ë§Œì¡±ë„ ì¡°ì‚¬ í™”ë©´ -->
                    <div class="screen-view satisfaction-screen hidden" id="satisfactionScreen">
                        <div class="header">
                            <div class="celebration">ğŸ‰</div>
                            <h1>ê±°ë˜ ì™„ë£Œ!</h1>
                            <p>ì†Œì¤‘í•œ ì˜ê²¬ì„ ë“¤ë ¤ì£¼ì„¸ìš”</p>
                        </div>

                        <div class="content">
                            <!-- ê±°ë˜ ì •ë³´ -->
                            <div class="survey-card">
                                <div class="trade-info">
                                    <div class="trade-item">ğŸ“± ì•„ì´í° 14 í”„ë¡œ</div>
                                    <div class="trade-user">íŒë§¤ì: ê¹€ì² ìˆ˜ë‹˜</div>
                                </div>
                            </div>

                            <!-- ê±°ë˜ ìƒëŒ€ë°© í‰ê°€ -->
                            <div class="survey-card">
                                <div class="section-title">
                                    ğŸ‘¤ ê±°ë˜ ìƒëŒ€ë°© í‰ê°€
                                </div>
                                
                                <div class="rating-section">
                                    <div class="rating-label">ê±°ë˜ ìƒëŒ€ë°©ì€ ì–´ë– ì…¨ë‚˜ìš”?</div>
                                    <div class="star-rating" data-rating="partner">
                                        <span class="star" data-value="1">â­</span>
                                        <span class="star" data-value="2">â­</span>
                                        <span class="star" data-value="3">â­</span>
                                        <span class="star" data-value="4">â­</span>
                                        <span class="star" data-value="5">â­</span>
                                    </div>
                                    <div class="rating-text" id="partnerRatingText">ë³„ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”</div>
                                </div>

                                <div class="tag-section">
                                    <div class="rating-label">ì–´ë–¤ ì ì´ ì¢‹ì•˜ë‚˜ìš”? (ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)</div>
                                    <div class="tag-grid">
                                        <div class="tag-item" onclick="toggleTag(this)">ì‹œê°„ ì•½ì† ì¤€ìˆ˜</div>
                                        <div class="tag-item" onclick="toggleTag(this)">ì¹œì ˆí•œ ì‘ëŒ€</div>
                                        <div class="tag-item" onclick="toggleTag(this)">ìƒí’ˆ ìƒíƒœ ì–‘í˜¸</div>
                                        <div class="tag-item" onclick="toggleTag(this)">ë¹ ë¥¸ ì‘ë‹µ</div>
                                        <div class="tag-item" onclick="toggleTag(this)">ì •í™•í•œ ì •ë³´ ì œê³µ</div>
                                        <div class="tag-item" onclick="toggleTag(this)">ì•ˆì „í•œ ê±°ë˜ì¥ì†Œ</div>
                                    </div>
                                </div>
                            </div>

                            <!-- ì„œë¹„ìŠ¤ ë§Œì¡±ë„ -->
                            <div class="survey-card">
                                <div class="section-title">
                                    ğŸ¥• ìº í¼ìŠ¤ë‹¹ê·¼ ì„œë¹„ìŠ¤ í‰ê°€
                                </div>
                                
                                <div class="rating-section">
                                    <div class="rating-label">ì„œë¹„ìŠ¤ ì „ë°˜ì ì¸ ë§Œì¡±ë„ëŠ”?</div>
                                    <div class="emoji-rating">
                                        <div class="emoji-option" onclick="selectEmoji(this, 1)">
                                            <div class="emoji">ğŸ˜¢</div>
                                            <div class="emoji-label">ë¶ˆë§Œì¡±</div>
                                        </div>
                                        <div class="emoji-option" onclick="selectEmoji(this, 2)">
                                            <div class="emoji">ğŸ˜</div>
                                            <div class="emoji-label">ë³´í†µ</div>
                                        </div>
                                        <div class="emoji-option" onclick="selectEmoji(this, 3)">
                                            <div class="emoji">ğŸ˜Š</div>
                                            <div class="emoji-label">ë§Œì¡±</div>
                                        </div>
                                        <div class="emoji-option" onclick="selectEmoji(this, 4)">
                                            <div class="emoji">ğŸ˜</div>
                                            <div class="emoji-label">ë§¤ìš°ë§Œì¡±</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="rating-section">
                                    <div class="rating-label">ì•± ì‚¬ìš© í¸ì˜ì„±ì€?</div>
                                    <div class="star-rating" data-rating="usability">
                                        <span class="star" data-value="1">â­</span>
                                        <span class="star" data-value="2">â­</span>
                                        <span class="star" data-value="3">â­</span>
                                        <span class="star" data-value="4">â­</span>
                                        <span class="star" data-value="5">â­</span>
                                    </div>
                                    <div class="rating-text" id="usabilityRatingText">ë³„ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”</div>
                                </div>
                            </div>

                            <!-- ì¶”ê°€ ì˜ê²¬ -->
                            <div class="survey-card">
                                <div class="section-title">
                                    ğŸ’­ ì¶”ê°€ ì˜ê²¬
                                </div>
                                
                                <div class="textarea-group">
                                    <label class="textarea-label">ê°œì„ ì‚¬í•­ì´ë‚˜ ì˜ê²¬ì„ ììœ ë¡­ê²Œ ì ì–´ì£¼ì„¸ìš”</label>
                                    <textarea 
                                        class="feedback-textarea" 
                                        placeholder="ì„œë¹„ìŠ¤ ê°œì„ ì„ ìœ„í•œ ì†Œì¤‘í•œ ì˜ê²¬ì„ ë“¤ë ¤ì£¼ì„¸ìš”..."
                                        maxlength="500"
                                        oninput="updateCharCount(this)"
                                    ></textarea>
                                    <div class="char-count">0 / 500</div>
                                </div>
                            </div>

                            <!-- ì œì¶œ ë²„íŠ¼ -->
                            <button class="btn-primary1" onclick="submitSurvey()">
                                í‰ê°€ ì™„ë£Œí•˜ê¸°
                            </button>
                            <button class="btn-secondary" onclick="skipSurvey()">
                                ë‚˜ì¤‘ì— í•˜ê¸°
                            </button>
                        </div>
                    </div>

                    <!-- ì™„ë£Œ í™”ë©´ -->
                    <div class="completion-screen" id="completionScreen">
                        <div class="completion-icon">âœ…</div>
                        <div class="completion-title">í‰ê°€í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!</div>
                        <div class="completion-subtitle">ì†Œì¤‘í•œ ì˜ê²¬ì´ ì„œë¹„ìŠ¤ ê°œì„ ì— ë„ì›€ì´ ë©ë‹ˆë‹¤</div>
                        <button class="btn-primary1" onclick="goToMain()" style="max-width: 200px;">
                            ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°
                        </button>
                    </div>
                </div>

                <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
                <div class="bottom-nav" id="bottomNav" style="display: none;">
                    <div class="nav-item active" onclick="setActiveNav(0); showMain()">
                        <div class="nav-icon">ğŸ </div>
                        <div class="nav-label">í™ˆ</div>
                    </div>
                    <div class="nav-item" onclick="setActiveNav(1); showProductList()">
                        <div class="nav-icon">ğŸ”</div>
                        <div class="nav-label">ê²€ìƒ‰</div>
                    </div>
                    <div class="nav-item" onclick="setActiveNav(2); showToast('ì±„íŒ… ê¸°ëŠ¥ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤')">
                        <div class="nav-icon">ğŸ’¬</div>
                        <div class="nav-label">ì±„íŒ…</div>
                    </div>
                    <div class="nav-item" onclick="setActiveNav(3); showToast('í”„ë¡œí•„ ê¸°ëŠ¥ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤')">
                        <div class="nav-icon">ğŸ‘¤</div>
                        <div class="nav-label">í”„ë¡œí•„</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- í† ìŠ¤íŠ¸ ë©”ì‹œì§€ -->
    <div class="toast" id="toast"></div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let currentScreen = 'auth';
        let currentTradeStep = 1;
        let currentTradeType = null;

        // ë§Œì¡±ë„ ì¡°ì‚¬ ê´€ë ¨ ë³€ìˆ˜
        let partnerRating = 0;
        let usabilityRating = 0;
        let serviceRating = 0;
        let selectedTags = [];
        let selectedProduct = null;

        // ìƒ˜í”Œ ìƒí’ˆ ë°ì´í„°
        const sampleProducts = [
            {id: 1, title: "ì•„ì´í° 14 í”„ë¡œ", price: "800,000ì›", location: "ê³µí•™ê´€", emoji: "ğŸ“±"},
            {id: 2, title: "ë§¥ë¶ í”„ë¡œ M1", price: "1,200,000ì›", location: "ì¤‘ì•™ë„ì„œê´€", emoji: "ğŸ’»"},
            {id: 3, title: "ì—ì–´íŒŸ í”„ë¡œ", price: "180,000ì›", location: "í•™ìƒíšŒê´€", emoji: "ğŸ§"},
            {id: 4, title: "ì•„ì´íŒ¨ë“œ ì—ì–´", price: "450,000ì›", location: "ê¸°ìˆ™ì‚¬", emoji: "ğŸ“±"},
            {id: 5, title: "ë‚˜ì´í‚¤ ìš´ë™í™”", price: "120,000ì›", location: "ì²´ìœ¡ê´€", emoji: "ğŸ‘Ÿ"},
            {id: 6, title: "ë…¸íŠ¸ë¶ ê±°ì¹˜ëŒ€", price: "35,000ì›", location: "ê³µí•™ê´€", emoji: "ğŸ–¥ï¸"},
            {id: 7, title: "ë°±íŒ©", price: "80,000ì›", location: "í•™ìƒíšŒê´€", emoji: "ğŸ’"},
            {id: 8, title: "ìŠ¤ìœ„ì¹˜ ê²Œì„", price: "45,000ì›", location: "ê¸°ìˆ™ì‚¬", emoji: "ğŸ®"}
        ];

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            updateTime();
            setInterval(updateTime, 60000); // 1ë¶„ë§ˆë‹¤ ì‹œê°„ ì—…ë°ì´íŠ¸
            generateProducts();
            initSatisfactionRating();
        });

        // ì‹œê°„ ì—…ë°ì´íŠ¸
        function updateTime() {
            const now = new Date();
            const timeString = now.getHours() + ':' + String(now.getMinutes()).padStart(2, '0');
            document.getElementById('currentTime').textContent = timeString;
        }

        // í™”ë©´ ì „í™˜ í•¨ìˆ˜
        function switchScreen(fromScreen, toScreen) {
            const from = document.getElementById(fromScreen);
            const to = document.getElementById(toScreen);
            
            from.classList.add('hidden');
            to.classList.remove('hidden');
            
            setTimeout(() => {
                to.classList.add('fade-in');
            }, 50);
            
            currentScreen = toScreen.replace('Screen', '');
        }

        // ë¡œê·¸ì¸
        function login() {
            const btn = document.getElementById('loginBtn');
            const originalText = btn.textContent;
            
            btn.innerHTML = '<span class="loading"></span> ë¡œê·¸ì¸ ì¤‘...';
            btn.disabled = true;
            
            setTimeout(() => {
                switchScreen('authScreen', 'mainScreen');
                document.getElementById('bottomNav').style.display = 'flex';
                showToast('ë¡œê·¸ì¸ ì„±ê³µ! í™˜ì˜í•©ë‹ˆë‹¤ ğŸ‰');
                btn.textContent = originalText;
                btn.disabled = false;
            }, 1500);
        }

        // íšŒì›ê°€ì… í™”ë©´ í‘œì‹œ
        function showRegister() {
            switchScreen('authScreen', 'registerScreen');
        }

        // ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°
        function showAuth() {
            switchScreen('registerScreen', 'authScreen');
        }

        // íšŒì›ê°€ì…
        function register() {
            showToast('íšŒì›ê°€ì… ì™„ë£Œ! ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”');
            setTimeout(() => {
                showAuth();
            }, 1500);
        }

        // ë©”ì¸ í™”ë©´ í‘œì‹œ
        function showMain() {
            switchScreen(currentScreen + 'Screen', 'mainScreen');
            currentScreen = 'main';
        }

        // ìƒí’ˆ ëª©ë¡ í™”ë©´ í‘œì‹œ
        function showProductList() {
            switchScreen(currentScreen + 'Screen', 'productListScreen');
            currentScreen = 'productList';
        }

        // ìƒí’ˆ ìƒì„±
        function generateProducts() {
            const grid = document.getElementById('productGrid');
            grid.innerHTML = '';
            
            sampleProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.onclick = () => selectProduct(product);
                
                productCard.innerHTML = `
                    <div class="product-image">${product.emoji}</div>
                    <div class="product-info">
                        <div class="product-title">${product.title}</div>
                        <div class="product-price">${product.price}</div>
                        <div class="product-location">${product.location}</div>
                    </div>
                `;
                
                grid.appendChild(productCard);
            });
        }

        // ìƒí’ˆ ê²€ìƒ‰
        function searchProducts(query) {
            const grid = document.getElementById('productGrid');
            grid.innerHTML = '';
            
            const filteredProducts = sampleProducts.filter(product => 
                product.title.toLowerCase().includes(query.toLowerCase()) ||
                product.location.toLowerCase().includes(query.toLowerCase())
            );
            
            filteredProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.onclick = () => selectProduct(product);
                
                productCard.innerHTML = `
                    <div class="product-image">${product.emoji}</div>
                    <div class="product-info">
                        <div class="product-title">${product.title}</div>
                        <div class="product-price">${product.price}</div>
                        <div class="product-location">${product.location}</div>
                    </div>
                `;
                
                grid.appendChild(productCard);
            });
            
            if (filteredProducts.length === 0) {
                grid.innerHTML = '<div style="text-align: center; padding: 50px; color: #666;">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</div>';
            }
        }

        // ìƒí’ˆ ì„ íƒ
        function selectProduct(product) {
            selectedProduct = product; // ì„ íƒëœ ìƒí’ˆ ì €ì¥
            showToast(`${product.title} ìƒí’ˆì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤`);
            setTimeout(() => {
                currentTradeType = 'buyer';
                showTradeFlow('buyer');
            }, 1000);
        }

        // íŒë§¤ì í”Œë¡œìš°
        function showSellerFlow() {
            currentTradeType = 'seller';
            // íŒë§¤ìì˜ ê²½ìš° ì‹ ê·œ ë“±ë¡ ìƒí’ˆìœ¼ë¡œ ì„¤ì •
            selectedProduct = {title: "ì‹ ê·œ ë“±ë¡ ìƒí’ˆ", emoji: "ğŸ“¦"};
            showTradeFlow('seller');
        }

        // ê±°ë˜ ë°©ì‹ ì„ íƒ
        function selectTradeMethod(method) {
            const methodNames = {
                'smart': 'ìŠ¤ë§ˆíŠ¸ ê³„ì•½ ì—ìŠ¤í¬ë¡œ',
                'direct': 'ì§ì ‘ ê±°ë˜',
                'escrow': 'ì…ê¸ˆ ì•½ì†'
            };
            
            showToast(`${methodNames[method]} ë°©ì‹ì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤`);
            
            setTimeout(() => {
                // ìƒí’ˆì´ ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ê°’ ì„¤ì •
                if (!selectedProduct) {
                    selectedProduct = {title: "ì¼ë°˜ ìƒí’ˆ", emoji: "ğŸ“¦"};
                }
                showTradeFlow(currentTradeType || 'general');
            }, 1000);
        }

        // ê±°ë˜ ê³¼ì • í™”ë©´ í‘œì‹œ
        function showTradeFlow(type) {
            switchScreen(currentScreen + 'Screen', 'tradeScreen');
            currentScreen = 'trade';
            
            const title = type === 'seller' ? 'íŒë§¤ ì§„í–‰ ìƒí™©' : 
                         type === 'buyer' ? 'êµ¬ë§¤ ì§„í–‰ ìƒí™©' : 'ê±°ë˜ ì§„í–‰ ìƒí™©';
            
            document.getElementById('tradeTitle').textContent = title;
            updateTradeStep(1);
            generateTradeSteps(type);
        }

        // ê±°ë˜ ë‹¨ê³„ ì—…ë°ì´íŠ¸
        function updateTradeStep(step) {
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            
            const percentage = (step / 3) * 100;
            progressFill.style.width = percentage + '%';
            progressText.textContent = `${step}/3 ë‹¨ê³„ ì™„ë£Œ`;
            
            currentTradeStep = step;
        }

        // ê±°ë˜ ë‹¨ê³„ ìƒì„±
        function generateTradeSteps(type) {
            const stepContent = document.getElementById('stepContent');
            stepContent.innerHTML = '';
            
            const steps = [
                {
                    number: 1,
                    title: 'ì‹ ì› ì¸ì¦',
                    description: 'í•™êµ ì´ë©”ì¼ ì¸ì¦ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.',
                    items: [
                        {text: 'ğŸ“§ í•™êµ ì´ë©”ì¼ ì¸ì¦', status: 'complete'},
                        {text: 'ğŸ“± íœ´ëŒ€í° ë²ˆí˜¸ ì¸ì¦', status: 'complete'}
                    ]
                },
                {
                    number: 2,
                    title: type === 'seller' ? 'ìƒí’ˆ ë“±ë¡' : 'ê±°ë˜ ì¡°ê±´ ì„¤ì •',
                    description: type === 'seller' ? 'ìƒí’ˆ ì •ë³´ë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”.' : 'ê±°ë˜ ë°©ì‹ê³¼ ì¡°ê±´ì„ ì„¤ì •í•´ì£¼ì„¸ìš”.',
                    items: [
                        {text: type === 'seller' ? 'ğŸ“¸ ìƒí’ˆ ì‚¬ì§„ ì—…ë¡œë“œ' : 'ğŸ”’ ì—ìŠ¤í¬ë¡œ ì„¤ì •', status: 'pending'},
                        {text: type === 'seller' ? 'ğŸ“ ìƒí’ˆ ì„¤ëª… ì‘ì„±' : 'ğŸ“ GPS ìœ„ì¹˜ ì„¤ì •', status: 'pending'}
                    ]
                },
                {
                    number: 3,
                    title: 'ê±°ë˜ ì™„ë£Œ',
                    description: 'ìƒí˜¸ í‰ê°€ í›„ ê±°ë˜ê°€ ì™„ë£Œë©ë‹ˆë‹¤.',
                    items: [
                        {text: 'ğŸ“· ë¬¼í’ˆ í™•ì¸ ì‚¬ì§„', status: 'waiting'},
                        {text: 'â­ ìƒí˜¸ í‰ê°€', status: 'waiting'}
                    ]
                }
            ];
            
            steps.forEach((step, index) => {
                const stepCard = document.createElement('div');
                stepCard.className = 'step-card';
                
                let itemsHtml = '';
                step.items.forEach(item => {
                    const icon = item.status === 'complete' ? 'âœ…' : 
                                item.status === 'pending' ? 'â³' : 'â­•';
                    const iconClass = item.status === 'complete' ? 'check-icon' : 
                                     item.status === 'pending' ? 'pending-icon' : '';
                    
                    itemsHtml += `
                        <div class="verification-item">
                            <span>${item.text}</span>
                            <span class="${iconClass}">${icon}</span>
                        </div>
                    `;
                });
                
                stepCard.innerHTML = `
                    <div class="step-number">${step.number}</div>
                    <h3>${step.title}</h3>
                    <p style="color: #666; margin: 10px 0;">${step.description}</p>
                    ${itemsHtml}
                `;
                
                // ë‹¨ê³„ 2ì— ë²„íŠ¼ ì¶”ê°€
                if (step.number === 2) {
                    const button = document.createElement('button');
                    button.className = 'btn-primary';
                    button.style = 'margin-top: 15px; background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%); border: none;';
                    button.textContent = step.number === 2 ? 'ë‹¤ìŒ ë‹¨ê³„ë¡œ' : 'ì™„ë£Œí•˜ê¸°';
                    button.onclick = () => nextStep();
                    stepCard.appendChild(button);
                }
                
                stepContent.appendChild(stepCard);
            });
            
            // ëŒì•„ê°€ê¸° ë²„íŠ¼
            const backButton = document.createElement('button');
            backButton.className = 'btn-primary';
            backButton.style = 'margin-top: 30px; background: linear-gradient(135deg, #6b7280 0%, #9ca3af 100%); border: none;';
            backButton.textContent = 'ì´ì „ìœ¼ë¡œ ëŒì•„ê°€ê¸°';
            backButton.onclick = () => showMain();
            stepContent.appendChild(backButton);
        }

        // ë‹¤ìŒ ë‹¨ê³„
        function nextStep() {
            if (currentTradeStep < 3) {
                const nextStep = currentTradeStep + 1;
                updateTradeStep(nextStep);
                showToast(`${nextStep}ë‹¨ê³„ë¡œ ì§„í–‰ë˜ì—ˆìŠµë‹ˆë‹¤`);
                
                // 2ë‹¨ê³„ë¥¼ ì™„ë£Œë¡œ ì—…ë°ì´íŠ¸
                const stepCards = document.querySelectorAll('.step-card');
                if (stepCards[1]) {
                    const pendingItems = stepCards[1].querySelectorAll('.pending-icon');
                    pendingItems.forEach(item => {
                        item.textContent = 'âœ…';
                        item.className = 'check-icon';
                    });
                }
                
                // 3ë‹¨ê³„ í™œì„±í™”
                if (nextStep === 3) {
                    const waitingItems = stepCards[2].querySelectorAll('.verification-item span:last-child');
                    waitingItems.forEach(item => {
                        if (item.textContent === 'â­•') {
                            item.textContent = 'â³';
                            item.className = 'pending-icon';
                        }
                    });
                    
                    // ì™„ë£Œ ë²„íŠ¼ ì¶”ê°€
                    setTimeout(() => {
                        const completeButton = document.createElement('button');
                        completeButton.className = 'btn-primary';
                        completeButton.style = 'margin-top: 15px; background: linear-gradient(135deg, #059669 0%, #0d9488 100%); border: none;';
                        completeButton.textContent = 'ê±°ë˜ ì™„ë£Œí•˜ê¸°';
                        completeButton.onclick = () => completeTransaction();
                        stepCards[2].appendChild(completeButton);
                    }, 1000);
                }
            }
        }

        // ê±°ë˜ ì™„ë£Œ (ë§Œì¡±ë„ ì¡°ì‚¬ë¡œ ì´ë™)
        function completeTransaction() {
            showToast('ê±°ë˜ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰');
            setTimeout(() => {
                updateTradeInfo(); // ê±°ë˜ ì •ë³´ ì—…ë°ì´íŠ¸
                switchScreen('tradeScreen', 'satisfactionScreen');
                currentScreen = 'satisfaction';
            }, 2000);
        }

        // ê±°ë˜ ì •ë³´ ì—…ë°ì´íŠ¸
        function updateTradeInfo() {
            if (selectedProduct) {
                const tradeItem = document.querySelector('.trade-item');
                const tradeUser = document.querySelector('.trade-user');
                
                tradeItem.textContent = `${selectedProduct.emoji} ${selectedProduct.title}`;
                tradeUser.textContent = 'íŒë§¤ì: ê¹€ì² ìˆ˜ë‹˜';
            }
        }

        // ë§Œì¡±ë„ ì¡°ì‚¬ ë³„ì  í‰ê°€ ì´ˆê¸°í™”
        function initSatisfactionRating() {
            document.querySelectorAll('.star-rating').forEach(ratingContainer => {
                const stars = ratingContainer.querySelectorAll('.star');
                const ratingType = ratingContainer.getAttribute('data-rating');
                
                stars.forEach((star, index) => {
                    star.addEventListener('click', () => {
                        const rating = index + 1;
                        updateStarRating(ratingContainer, rating, ratingType);
                    });
                    
                    star.addEventListener('mouseover', () => {
                        highlightStars(ratingContainer, index + 1);
                    });
                });
                
                ratingContainer.addEventListener('mouseleave', () => {
                    const currentRating = ratingType === 'partner' ? partnerRating : usabilityRating;
                    highlightStars(ratingContainer, currentRating);
                });
            });
        }

        function highlightStars(container, rating) {
            const stars = container.querySelectorAll('.star');
            stars.forEach((star, index) => {
                star.classList.toggle('active', index < rating);
            });
        }

        function updateStarRating(container, rating, type) {
            const textElement = document.getElementById(type + 'RatingText');
            const ratingTexts = {
                1: 'ì•„ì‰¬ì›Œìš” ğŸ˜',
                2: 'ë³„ë¡œì˜ˆìš” ğŸ˜', 
                3: 'ê´œì°®ì•„ìš” ğŸ™‚',
                4: 'ì¢‹ì•„ìš” ğŸ˜Š',
                5: 'ìµœê³ ì˜ˆìš”! ğŸ˜'
            };
            
            if (type === 'partner') {
                partnerRating = rating;
            } else if (type === 'usability') {
                usabilityRating = rating;
            }
            
            highlightStars(container, rating);
            textElement.textContent = ratingTexts[rating];
            
            // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
            textElement.style.transform = 'scale(1.1)';
            textElement.style.color = '#4f46e5';
            setTimeout(() => {
                textElement.style.transform = 'scale(1)';
                textElement.style.color = '#666';
            }, 300);
        }

        // ì´ëª¨ì§€ ì„ íƒ
        function selectEmoji(element, rating) {
            // ëª¨ë“  ì´ëª¨ì§€ ì˜µì…˜ì—ì„œ selected í´ë˜ìŠ¤ ì œê±°
            document.querySelectorAll('.emoji-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // ì„ íƒëœ ì˜µì…˜ì— selected í´ë˜ìŠ¤ ì¶”ê°€
            element.classList.add('selected');
            serviceRating = rating;
            
            // í”¼ë“œë°± íš¨ê³¼
            element.style.transform = 'scale(1.1)';
            setTimeout(() => {
                element.style.transform = 'scale(1)';
            }, 200);
        }

        // íƒœê·¸ í† ê¸€
        function toggleTag(element) {
            element.classList.toggle('selected');
            const tagText = element.textContent;
            
            if (element.classList.contains('selected')) {
                selectedTags.push(tagText);
            } else {
                selectedTags = selectedTags.filter(tag => tag !== tagText);
            }
        }

        // ê¸€ì ìˆ˜ ì¹´ìš´íŠ¸
        function updateCharCount(textarea) {
            const charCount = textarea.value.length;
            const charCountElement = textarea.parentElement.querySelector('.char-count');
            charCountElement.textContent = `${charCount} / 500`;
            
            if (charCount > 450) {
                charCountElement.style.color = '#dc2626';
            } else {
                charCountElement.style.color = '#666';
            }
        }

        // ì„¤ë¬¸ ì œì¶œ
        function submitSurvey() {
            // í•„ìˆ˜ í•­ëª© ê²€ì¦
            if (partnerRating === 0) {
                showToast('ê±°ë˜ ìƒëŒ€ë°© í‰ê°€ë¥¼ í•´ì£¼ì„¸ìš”');
                return;
            }
            
            if (serviceRating === 0) {
                showToast('ì„œë¹„ìŠ¤ ë§Œì¡±ë„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”');
                return;
            }
            
            // ì œì¶œ ì²˜ë¦¬
            showToast('í‰ê°€ë¥¼ ì œì¶œí•˜ê³  ìˆìŠµë‹ˆë‹¤...');
            
            setTimeout(() => {
                // ì™„ë£Œ í™”ë©´ìœ¼ë¡œ ì „í™˜
                document.getElementById('satisfactionScreen').style.display = 'none';
                document.getElementById('completionScreen').style.display = 'flex';
            }, 1500);
        }

        // ì„¤ë¬¸ ê±´ë„ˆë›°ê¸°
        function skipSurvey() {
            if (confirm('ì •ë§ í‰ê°€ë¥¼ ê±´ë„ˆë›°ì‹œê² ìŠµë‹ˆê¹Œ?\nì†Œì¤‘í•œ ì˜ê²¬ì´ ì„œë¹„ìŠ¤ ê°œì„ ì— ë„ì›€ì´ ë©ë‹ˆë‹¤.')) {
                goToMain();
            }
        }

        // ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°
        function goToMain() {
            showToast('ë©”ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤');
            setTimeout(() => {
                showMain();
                // í‰ê°€ ì´ˆê¸°í™”
                partnerRating = 0;
                usabilityRating = 0;
                serviceRating = 0;
                selectedTags = [];
                selectedProduct = null; // ì„ íƒëœ ìƒí’ˆ ì´ˆê¸°í™”
                updateTradeStep(1);
                
                // í™”ë©´ ìƒíƒœ ë¦¬ì…‹
                document.getElementById('satisfactionScreen').style.display = '';
                document.getElementById('completionScreen').style.display = 'none';
                
                // ë³„ì ê³¼ ì´ëª¨ì§€ ì„ íƒ ìƒíƒœ ì´ˆê¸°í™”
                resetSatisfactionForm();
            }, 1000);
        }

        // ë§Œì¡±ë„ ì¡°ì‚¬ í¼ ì´ˆê¸°í™”
        function resetSatisfactionForm() {
            // ëª¨ë“  ë³„ì  ì´ˆê¸°í™”
            document.querySelectorAll('.star-rating .star').forEach(star => {
                star.classList.remove('active');
            });
            
            // ë³„ì  í…ìŠ¤íŠ¸ ì´ˆê¸°í™”
            document.getElementById('partnerRatingText').textContent = 'ë³„ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”';
            document.getElementById('usabilityRatingText').textContent = 'ë³„ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”';
            
            // ì´ëª¨ì§€ ì„ íƒ ì´ˆê¸°í™”
            document.querySelectorAll('.emoji-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // íƒœê·¸ ì„ íƒ ì´ˆê¸°í™”
            document.querySelectorAll('.tag-item').forEach(tag => {
                tag.classList.remove('selected');
            });
            
            // í…ìŠ¤íŠ¸ì—ë¦¬ì–´ ì´ˆê¸°í™”
            const textarea = document.querySelector('.feedback-textarea');
            if (textarea) {
                textarea.value = '';
                updateCharCount(textarea);
            }
        }

        // í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ í™œì„±í™”
        function setActiveNav(index) {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach((item, i) => {
                item.classList.toggle('active', i === index);
            });
        }

        // í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í‘œì‹œ
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ (Enterë¡œ ë¡œê·¸ì¸)
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && currentScreen === 'auth') {
                login();
            }
        });
    </script>
</body>
</html>